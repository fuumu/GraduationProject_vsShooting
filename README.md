# 卒業制作 2025

![タイトルロゴ](shooting_logo.png)

## 概要

Arduino UNO R4 WiFi(以降より、Arduino)で動作する対戦型シューティングゲーム。
Arduinoに搭載されているESP32のWiFi機能を使用したリアルタイム対戦が可能。

## 構成

### ハードウェア構成

| 番号 | 部品名                   | 数量 | 備考               |
| -- | --------------------- | -- | ---------------- |
| 1  | Arduino Uno R4 WiFi   | 1個 | マイコン本体（Wi-Fi付き）  |
| 2  | ディスプレイ（OLEDなど）        | 1個 | I2C接続が可能なもの        |
| 3  | アナログスティック             | 1個 | 操作に使用　スイッチは未使用   |
| 4  | タクトスイッチ（ボタン）          | 1個 | 入力用          |
| 5  | 抵抗 10kΩ               | 1個 | プルダウンに使用 |
| 6  | セラミックコンデンサ 104（0.1µF） | 1個 | ジッター排除に使用  |
| 7  | ワイヤー | 約15個 | ブレッジボード図のワイヤー分＋スコアリセット用  |

#### ブレッジボード図

![ブレッジボード図](.\frizing_data\UntitledSketch_breadboard.png)

#### 回路図

![回路図](.\frizing_data\UntitledSketch_circuitDiagram.png)

### ソフトウェア構成

- **client**  
Arduinoで動作するシューティングゲームのプログラムが含まれている。
- **server**  
Node.jsで動作するサーバープログラムが含まれている。

## セットアップ

### Arduino側のセットアップ

1. ブレッジボード図を参考に回路を組む。  
1. clientフォルダを以下のいずれかの統合環境で開き、SSID、パスワード、サーバーのipアドレス、ポート番号をそれぞれ使用するものに合わせて書き換える。
    - **Arduino IDE**
    - **PlatformIO**（Visual Studio Codeの拡張機能）
1. 変更内容を保存・ビルドし、Arduinoに書き込むと、ゲームが起動する。

---

### サーバー側のセットアップ(バーサスモードをプレイする場合)

1. 事前にNode.jsがインストールされていなければ以下のサイトを参考にインストールを行う。

    - https://learn.microsoft.com/ja-jp/windows/dev-environment/javascript/nodejs-on-windows

1. VSCodeでserverフォルダを開き、以下のコマンドを実行することで依存関係のインストールを行う。

    ```bash
    npm install
    ```

1. さらに以下のコマンドを実行することでサーバーが起動する

    ```bash
    npm install
    ```

1. 終了させるにはCtrl+Cを入力する

## ゲームの仕様

まず電源投入すると、タイトルロゴが表示された後、ゲームモード選択画面が表示される。
このとき12番ピンをGNDに接続しておくと、後述のシングルモードのハイスコアをリセットすることが可能。

(ここにタイトルの写真)

本ゲームには、以下の2つのモードがある。

**1. Single Mode（シングルモード）**  
    - 一人プレイ用のモード。残機がなくなるまでに何回敵に弾を当てられるかに挑戦。

**1. Versus Mode（バーサスモード）**  
    - ネットワークを介して2台のArduino同士がリアルタイムで対戦するモード。Wi-Fi通信を利用し、離れた場所でも対戦が可能。

アナログスティックを使ってモードを選択し、ボタンを押すことでゲームを開始する。

以下にそれぞれのゲームの詳細を記述する。

---

### Single Mode（シングルモード）
(ここにプレイ動画を張る)
一人プレイ用のモード。ランダムな位置にワープを繰り返す敵に弾を当ててハイスコアを目指す。
敵の弾に当たるとプレイヤーの残機が減っていき、0になった状態で弾に当たるとゲームオーバー。
ハイスコアは電源を落としても保持される。

---

### Versus Mode（バーサスモード）
(ここにプレイ動画を張る)
ネットワークを介して2台のArduino同士がリアルタイムで対戦するモード。
このモードを選択するとまずアクセスポイントとWebSocketへの接続が順番に行われる。
アクセスポイントのSSIDとパスワード、WebSocketのipアドレスとポートはそれぞれファイルに記載されたものが使用される。

## 今後の課題

- BGMや効果音がないため、モジュールを駆使してサウンドを再生する仕組みを作る。
- 最大４人で対戦できるようにする。
- シューティングゲームだけではなく様々なゲームを遊べるようにするのも良いかもしれない。
